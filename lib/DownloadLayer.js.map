{"version":3,"sources":["DownloadLayer.js"],"names":["type","level","DownloadLayer","args","state","open","baidu","weiboOpen","showWeiboLayer","bind","e","preventDefault","setState","renderWeiboLayer","props","weiboAndroidImageURL","weiboIOSImageURL","image","ios","backgroundImage","render","className","style","title","subTitle","itunesSchema","apkURL","yingyongbaoURL","logoURL","href","onClick","weibo","weixin","displayName","propTypes","string","isRequired"],"mappings":"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","file":"DownloadLayer.js","sourcesContent":["/**\n * @file 手百下载组件\n * @author leon <ludafa@outlook.com>\n */\n\nimport React, {Component, PropTypes} from 'react';\n\nimport {\n    registerComponent,\n    MOLA_COMPONENT_LEVEL_FIXED,\n    os,\n    browser\n} from 'mola';\n\nimport cx from 'classnames';\n\nexport const type = 'DownloadLayer';\nexport const level = MOLA_COMPONENT_LEVEL_FIXED;\n\nexport class DownloadLayer extends Component {\n\n    constructor(...args) {\n        super(...args);\n        this.state = {\n            open: !browser.baidu,\n            weiboOpen: false\n        };\n        this.showWeiboLayer = this.showWeiboLayer.bind(this);\n    }\n\n    showWeiboLayer(e) {\n        e.preventDefault();\n        this.setState({weiboOpen: true});\n    }\n\n    renderWeiboLayer() {\n\n        if (!this.state.weiboOpen) {\n            return null;\n        }\n\n        const {\n            weiboAndroidImageURL,\n            weiboIOSImageURL\n        } = this.props;\n\n        let image = os.ios ? weiboIOSImageURL : weiboAndroidImageURL;\n        return (\n            <div\n                style={{backgroundImage: `url(${image})`}}\n                onClick={() => this.setState({weiboOpen: false})} />\n        );\n    }\n\n    render() {\n\n        if (!this.state.open) {\n            return null;\n        }\n\n        let {\n            className = null,\n            style = null,\n            title,\n            subTitle,\n            itunesSchema,\n            apkURL,\n            yingyongbaoURL,\n            logoURL\n        } = this.props;\n\n        let href = '';\n        let onClick = null;\n\n        if (browser.weibo) {\n            onClick = this.showWeiboLayer;\n        }\n        else if (browser.weixin) {\n            href = yingyongbaoURL;\n        }\n        else {\n            href = os.ios ? itunesSchema : apkURL;\n        }\n\n        return (\n            <div\n                className={cx('mola-baidu-app-download-layer', className)}\n                style={style}>\n                <i onClick={() => this.setState({open: false})} />\n                <b style={{backgroundImage: `url(${logoURL})`}}/>\n                <section>\n                    <h4>{title}</h4>\n                    <p>{subTitle}</p>\n                </section>\n                <a href={href} onClick={onClick}>下载体验</a>\n                {this.renderWeiboLayer()}\n            </div>\n        );\n    }\n\n}\n\nDownloadLayer.displayName = type;\n\nDownloadLayer.propTypes = {\n    logoURL: PropTypes.string.isRequired,\n    itunesSchema: PropTypes.string.isRequired,\n    apkURL: PropTypes.string.isRequired,\n    weiboAndroidImageURL: PropTypes.string.isRequired,\n    weiboIOSImageURL: PropTypes.string.isRequired,\n    yingyongbaoURL: PropTypes.string.isRequired,\n    title: PropTypes.string.isRequired,\n    subTitle: PropTypes.string.isRequired\n};\n\nexport default registerComponent(type, level)(DownloadLayer);\n"]}